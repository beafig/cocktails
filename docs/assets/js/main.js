"use strict";const cocktailList=document.querySelector(".js-cocktails"),favouritesList=document.querySelector(".js-favourites"),inputElement=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-searchBtn"),resetBtn=document.querySelector(".js-resetBtn"),urlMargaritas="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita";let allCocktails=[],favCocktails=[];function map(e){allCocktails=e.drinks.map(e=>({name:e.strDrink,photo:e.strDrinkThumb,id:e.idDrink,ingredient1:e.strIngredient1,ingredient2:e.strIngredient2,ingredient3:e.strIngredient3,ingredient4:e.strIngredient4,ingredient5:e.strIngredient5,ingredient6:e.strIngredient6,ingredient7:e.strIngredient7,ingredient8:e.strIngredient8,ingredient9:e.strIngredient9,measures1:e.strMeasure1,measures2:e.strMeasure2,measures3:e.strMeasure3,measures4:e.strMeasure4,measures5:e.strMeasure5,measures6:e.strMeasure6,measures7:e.strMeasure7,measures8:e.strMeasure8,measures9:e.strMeasure9,instruction:e.strInstructions}))}function renderCocktails(e){cocktailList.innerHTML="";for(const t of e){const e=favCocktails.findIndex(e=>e.id===t.id);let s=t.photo,i="";-1!==e&&(i="selected"),favCocktails===[]&&(i=""),s||(s="./assets/images/cocktails.png");const n=`<li class="js-liElement main__list--cocktails ${i}" id="${t.id}"><h3 class="main__list--name main__list--name2">${t.name}</h3> <img src="${s}" title="${t.name}" alt="${t.name}" class="main__list--img main__list--img2"/></li>`;cocktailList.innerHTML+=n}addEvent()}function handleClickBtn(e){e.preventDefault();const t=inputElement.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(e=>e.json()).then(e=>{null===e.drinks?cocktailList.innerHTML="Lo sentimos, el cóctel buscado no está en la lista":(map(e),cocktailList.innerHTML="",renderCocktails(allCocktails))})}function handleClickList(e){const t=allCocktails.find(t=>t.id===e.currentTarget.id),s=favCocktails.findIndex(t=>t.id===e.currentTarget.id);-1===s?(e.currentTarget.classList.add("selected"),favCocktails.push(t),renderFavourites(favCocktails),localStorage.setItem("cocktails",JSON.stringify(favCocktails))):(e.currentTarget.classList.remove("selected"),favCocktails.splice(s,1),renderFavourites(favCocktails),localStorage.removeItem("cocktails"),localStorage.setItem("cocktails",JSON.stringify(favCocktails))),addCloseBtn()}function renderFavourites(e){favouritesList.innerHTML="";for(const t of e)favouritesList.innerHTML=`<li class="js-liElement main__list--cocktails" id="${t.id}"><h3 class="main__list--name">${t.name}<i class="fa-solid fa-xmark js-closeIcon" id="${t.id}"></i></h3> <p class="receipe">${t.ingredient1} ${t.measures1}</p><p class="receipe">${t.ingredient2} ${t.measures2}</p><p class="receipe">${t.ingredient3} ${t.measures3}</p><p class="receipe">${t.ingredient4} ${t.measures4}</p><p class="receipe">${t.ingredient5} ${t.measures5}</p><p class="receipe">${t.ingredient6} ${t.measures6}</p><p class="receipe">${t.ingredient7} ${t.measures7}</p><p class="receipe">${t.ingredient8} ${t.measures8}</p><p class="receipe">${t.ingredient9} ${t.measures9}</p><p class="receipe">${t.instruction}</p><p class="receipe">1 oz equivale a 30ml.</p> </li>`;addCloseBtn()}function handleClickReset(e){e.preventDefault(),favCocktails=[],favouritesList.innerHTML="",localStorage.removeItem("cocktails"),renderCocktails(allCocktails),console.log(favCocktails)}function handleClickClose(e){const t=favCocktails.findIndex(t=>t.id===e.currentTarget.id);favCocktails.splice(t,1),localStorage.removeItem("cocktails"),renderFavourites(favCocktails),renderCocktails(allCocktails),localStorage.setItem("cocktails",JSON.stringify(favCocktails)),console.log(favCocktails)}function handleIntro(e){"Enter"===e.code&&handleClickBtn(e)}function addEvent(){const e=document.querySelectorAll(".js-liElement");for(const t of e)t.addEventListener("click",handleClickList)}function addCloseBtn(){const e=document.querySelectorAll(".js-closeIcon");for(const t of e)t.addEventListener("click",handleClickClose)}fetch(urlMargaritas).then(e=>e.json()).then(e=>{map(e),renderCocktails(allCocktails),addEvent(),console.log(e)}),console.log(favCocktails),searchBtn.addEventListener("click",handleClickBtn),resetBtn.addEventListener("click",handleClickReset),inputElement.addEventListener("keyup",handleIntro);